# Generated by Django 6.0.1 on 2026-01-26 21:44

import django.core.validators
import django.db.models.deletion
from decimal import Decimal
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='City',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='Nom de la ville')),
                ('region', models.CharField(choices=[('north', 'R√©gion Nord'), ('central', 'R√©gion Centrale'), ('south', 'R√©gion Sud'), ('coast', 'R√©gion C√¥ti√®re')], default='central', max_length=20, verbose_name='R√©gion')),
                ('phone', models.CharField(blank=True, max_length=20, verbose_name='Num√©ro de t√©l√©phone')),
                ('map_x', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Position X sur la carte (%)')),
                ('map_y', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Position Y sur la carte (%)')),
                ('is_headquarters', models.BooleanField(default=False, verbose_name='Si√®ge social')),
                ('address', models.TextField(blank=True, verbose_name='Adresse compl√®te')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
            ],
            options={
                'verbose_name': 'Ville',
                'verbose_name_plural': 'Villes',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='ClickEvent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('element_type', models.CharField(max_length=50, verbose_name="Type d'√©l√©ment")),
                ('element_text', models.CharField(blank=True, max_length=200, verbose_name="Texte de l'√©l√©ment")),
                ('element_id', models.CharField(blank=True, max_length=100, verbose_name="ID de l'√©l√©ment")),
                ('url', models.CharField(max_length=500, verbose_name='URL de la page')),
                ('session_id', models.CharField(max_length=100, verbose_name='ID de session')),
                ('ip_address', models.GenericIPAddressField(verbose_name='Adresse IP')),
                ('city', models.CharField(blank=True, max_length=100, verbose_name='Ville')),
                ('timestamp', models.DateTimeField(auto_now_add=True, verbose_name='Horodatage')),
            ],
            options={
                'verbose_name': '√âv√©nement de clic',
                'verbose_name_plural': '√âv√©nements de clic',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='CurrencyRate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('currency_code', models.CharField(max_length=3, unique=True, verbose_name='Code devise')),
                ('currency_name', models.CharField(default='', max_length=50, verbose_name='Nom de la devise')),
                ('country', models.CharField(default='', max_length=100, verbose_name='Pays')),
                ('flag', models.CharField(default='üè≥Ô∏è', max_length=10, verbose_name='Drapeau')),
                ('rate_to_mad', models.DecimalField(decimal_places=6, default=Decimal('1.000000'), max_digits=10, verbose_name='Taux de change vers MAD')),
                ('last_updated', models.DateTimeField(auto_now=True, verbose_name='Derni√®re mise √† jour')),
            ],
            options={
                'verbose_name': 'Taux de change',
                'verbose_name_plural': 'Taux de change',
                'ordering': ['currency_code'],
            },
        ),
        migrations.CreateModel(
            name='DailyStat',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField(unique=True, verbose_name='Date')),
                ('total_visitors', models.IntegerField(default=0, verbose_name='Visiteurs totaux')),
                ('total_pageviews', models.IntegerField(default=0, verbose_name='Pages vues totales')),
                ('total_form_submissions', models.IntegerField(default=0, verbose_name='Soumissions de formulaire')),
                ('total_phone_calls', models.IntegerField(default=0, verbose_name='Appels t√©l√©phoniques')),
                ('total_whatsapp_clicks', models.IntegerField(default=0, verbose_name='Clics WhatsApp')),
                ('avg_session_duration', models.IntegerField(default=0, verbose_name='Dur√©e moyenne de session (s)')),
                ('top_city', models.CharField(blank=True, max_length=100, verbose_name='Ville principale')),
                ('top_training', models.CharField(blank=True, max_length=200, verbose_name='Formation la plus vue')),
            ],
            options={
                'verbose_name': 'Statistique quotidienne',
                'verbose_name_plural': 'Statistiques quotidiennes',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='FormSubmission',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('form_type', models.CharField(max_length=50, verbose_name='Type de formulaire')),
                ('training_title', models.CharField(blank=True, max_length=200, verbose_name='Formation concern√©e')),
                ('session_id', models.CharField(max_length=100, verbose_name='ID de session')),
                ('ip_address', models.GenericIPAddressField(verbose_name='Adresse IP')),
                ('city', models.CharField(blank=True, max_length=100, verbose_name='Ville')),
                ('country', models.CharField(blank=True, max_length=100, verbose_name='Pays')),
                ('time_spent', models.IntegerField(default=0, verbose_name='Temps pass√© sur le formulaire (secondes)')),
                ('timestamp', models.DateTimeField(auto_now_add=True, verbose_name='Horodatage')),
            ],
            options={
                'verbose_name': 'Soumission de formulaire',
                'verbose_name_plural': 'Soumissions de formulaire',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='PhoneCall',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('phone_number', models.CharField(max_length=20, verbose_name='Num√©ro appel√©')),
                ('caller_city', models.CharField(blank=True, max_length=100, verbose_name="Ville de l'appelant")),
                ('caller_country', models.CharField(blank=True, max_length=100, verbose_name="Pays de l'appelant")),
                ('url', models.CharField(blank=True, max_length=500, verbose_name='URL source')),
                ('session_id', models.CharField(max_length=100, verbose_name='ID de session')),
                ('ip_address', models.GenericIPAddressField(verbose_name='Adresse IP')),
                ('timestamp', models.DateTimeField(auto_now_add=True, verbose_name='Horodatage')),
            ],
            options={
                'verbose_name': 'Appel t√©l√©phonique',
                'verbose_name_plural': 'Appels t√©l√©phoniques',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='ThreatIP',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('ip_address', models.GenericIPAddressField(unique=True, verbose_name='Adresse IP')),
                ('reason', models.CharField(max_length=200, verbose_name='Raison')),
                ('threat_level', models.CharField(choices=[('low', 'Faible'), ('medium', 'Moyenne'), ('high', 'Haute')], default='medium', max_length=20, verbose_name='Niveau de menace')),
                ('request_count', models.PositiveIntegerField(default=1, verbose_name='Nombre de requ√™tes')),
                ('first_detected', models.DateTimeField(auto_now_add=True, verbose_name='Premi√®re d√©tection')),
                ('last_detected', models.DateTimeField(auto_now=True, verbose_name='Derni√®re d√©tection')),
                ('is_blocked', models.BooleanField(default=False, verbose_name='Bloqu√©')),
            ],
            options={
                'verbose_name': 'IP Mena√ßante',
                'verbose_name_plural': 'IPs Mena√ßantes',
                'ordering': ['-last_detected'],
            },
        ),
        migrations.CreateModel(
            name='VisitorSession',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('session_id', models.CharField(max_length=100, unique=True, verbose_name='ID de session')),
                ('ip_address', models.GenericIPAddressField(verbose_name='Adresse IP')),
                ('user_agent', models.TextField(verbose_name='User Agent')),
                ('city', models.CharField(blank=True, max_length=100, verbose_name='Ville')),
                ('country', models.CharField(blank=True, max_length=100, verbose_name='Pays')),
                ('device_type', models.CharField(blank=True, max_length=50, verbose_name="Type d'appareil")),
                ('browser', models.CharField(blank=True, max_length=100, verbose_name='Navigateur')),
                ('os', models.CharField(blank=True, max_length=100, verbose_name="Syst√®me d'exploitation")),
                ('referrer', models.CharField(blank=True, max_length=500, verbose_name='Referrer')),
                ('landing_page', models.CharField(max_length=500, verbose_name="Page d'arriv√©e")),
                ('start_time', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Heure de d√©but')),
                ('last_activity', models.DateTimeField(auto_now=True, verbose_name='Derni√®re activit√©')),
                ('page_views', models.IntegerField(default=1, verbose_name='Nombre de pages vues')),
                ('session_duration', models.IntegerField(default=0, verbose_name='Dur√©e de session (secondes)')),
            ],
            options={
                'verbose_name': 'Session visiteur',
                'verbose_name_plural': 'Sessions visiteurs',
                'ordering': ['-start_time'],
            },
        ),
        migrations.CreateModel(
            name='WhatsAppClick',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('phone_number', models.CharField(max_length=20, verbose_name='Num√©ro WhatsApp')),
                ('message_prefill', models.TextField(blank=True, verbose_name='Message pr√©-rempli')),
                ('url', models.CharField(blank=True, max_length=500, verbose_name='URL source')),
                ('session_id', models.CharField(max_length=100, verbose_name='ID de session')),
                ('ip_address', models.GenericIPAddressField(verbose_name='Adresse IP')),
                ('city', models.CharField(blank=True, max_length=100, verbose_name='Ville')),
                ('timestamp', models.DateTimeField(auto_now_add=True, verbose_name='Horodatage')),
            ],
            options={
                'verbose_name': 'Clic WhatsApp',
                'verbose_name_plural': 'Clics WhatsApp',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='PageView',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('url', models.CharField(max_length=500, verbose_name='URL visit√©e')),
                ('page_title', models.CharField(blank=True, max_length=200, verbose_name='Titre de la page')),
                ('referrer', models.CharField(blank=True, max_length=500, verbose_name='Referrer')),
                ('session_id', models.CharField(max_length=100, verbose_name='ID de session')),
                ('ip_address', models.GenericIPAddressField(verbose_name='Adresse IP')),
                ('user_agent', models.TextField(verbose_name='User Agent')),
                ('city', models.CharField(blank=True, max_length=100, verbose_name='Ville d√©tect√©e')),
                ('country', models.CharField(blank=True, max_length=100, verbose_name='Pays d√©tect√©')),
                ('device_type', models.CharField(blank=True, max_length=50, verbose_name="Type d'appareil")),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Horodatage')),
            ],
            options={
                'verbose_name': 'Vue de page',
                'verbose_name_plural': 'Vues de page',
                'ordering': ['-timestamp'],
                'indexes': [models.Index(fields=['session_id', 'timestamp'], name='diray_pagev_session_356dee_idx'), models.Index(fields=['city', 'timestamp'], name='diray_pagev_city_344900_idx'), models.Index(fields=['url', 'timestamp'], name='diray_pagev_url_1b9f6a_idx')],
            },
        ),
        migrations.CreateModel(
            name='RateLimitLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('ip_address', models.GenericIPAddressField(verbose_name='Adresse IP')),
                ('endpoint', models.CharField(max_length=200, verbose_name='Endpoint')),
                ('request_count', models.PositiveIntegerField(default=1, verbose_name='Nombre de requ√™tes')),
                ('period_minutes', models.PositiveIntegerField(default=1, verbose_name='P√©riode (minutes)')),
                ('first_request', models.DateTimeField(auto_now_add=True, verbose_name='Premi√®re requ√™te')),
                ('last_request', models.DateTimeField(auto_now=True, verbose_name='Derni√®re requ√™te')),
                ('is_threat', models.BooleanField(default=False, verbose_name='Menace')),
            ],
            options={
                'verbose_name': 'Log de Limite de Taux',
                'verbose_name_plural': 'Logs de Limite de Taux',
                'ordering': ['-last_request'],
                'indexes': [models.Index(fields=['ip_address', 'endpoint'], name='diray_ratel_ip_addr_b9bc40_idx'), models.Index(fields=['is_threat', 'last_request'], name='diray_ratel_is_thre_860b4a_idx')],
            },
        ),
        migrations.CreateModel(
            name='Training',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(db_index=True, max_length=200, verbose_name='Titre de la formation')),
                ('slug', models.SlugField(max_length=200, unique=True, verbose_name='URL slug')),
                ('short_description', models.TextField(max_length=300, verbose_name='Description courte')),
                ('detailed_description', models.TextField(verbose_name='Description d√©taill√©e')),
                ('price_mad', models.DecimalField(db_index=True, decimal_places=2, max_digits=10, verbose_name='Prix en MAD')),
                ('duration_days', models.PositiveIntegerField(verbose_name='Dur√©e en jours')),
                ('max_students', models.PositiveIntegerField(default=20, verbose_name="Nombre maximum d'√©tudiants")),
                ('success_rate', models.PositiveIntegerField(default=95, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Taux de r√©ussite (%)')),
                ('badge', models.CharField(choices=[('none', 'Aucun badge'), ('popular', 'üî• Populaire'), ('new', 'üÜï Nouvelle'), ('promo', '‚ö° Promotion')], default='none', max_length=20, verbose_name='Badge')),
                ('is_featured', models.BooleanField(db_index=True, default=False, verbose_name='Formation en vedette')),
                ('is_active', models.BooleanField(db_index=True, default=True, verbose_name='Active')),
                ('thumbnail', models.URLField(blank=True, max_length=500, null=True, verbose_name='URL de la miniature')),
                ('gallery_image_1', models.URLField(blank=True, max_length=500, null=True, verbose_name='Image galerie 1')),
                ('gallery_caption_1', models.CharField(blank=True, max_length=200, verbose_name='L√©gende image 1')),
                ('gallery_image_2', models.URLField(blank=True, max_length=500, null=True, verbose_name='Image galerie 2')),
                ('gallery_caption_2', models.CharField(blank=True, max_length=200, verbose_name='L√©gende image 2')),
                ('gallery_image_3', models.URLField(blank=True, max_length=500, null=True, verbose_name='Image galerie 3')),
                ('gallery_caption_3', models.CharField(blank=True, max_length=200, verbose_name='L√©gende image 3')),
                ('gallery_image_4', models.URLField(blank=True, max_length=500, null=True, verbose_name='Image galerie 4')),
                ('gallery_caption_4', models.CharField(blank=True, max_length=200, verbose_name='L√©gende image 4')),
                ('gallery_image_5', models.URLField(blank=True, max_length=500, null=True, verbose_name='Image galerie 5')),
                ('gallery_caption_5', models.CharField(blank=True, max_length=200, verbose_name='L√©gende image 5')),
                ('certificate_image_1', models.URLField(blank=True, max_length=500, null=True, verbose_name='Certificat 1 - URL')),
                ('certificate_name_1', models.CharField(blank=True, max_length=200, verbose_name='Certificat 1 - Nom')),
                ('certificate_desc_1', models.TextField(blank=True, verbose_name='Certificat 1 - Description')),
                ('certificate_image_2', models.URLField(blank=True, max_length=500, null=True, verbose_name='Certificat 2 - URL')),
                ('certificate_name_2', models.CharField(blank=True, max_length=200, verbose_name='Certificat 2 - Nom')),
                ('certificate_desc_2', models.TextField(blank=True, verbose_name='Certificat 2 - Description')),
                ('certificate_image_3', models.URLField(blank=True, max_length=500, null=True, verbose_name='Certificat 3 - URL')),
                ('certificate_name_3', models.CharField(blank=True, max_length=200, verbose_name='Certificat 3 - Nom')),
                ('certificate_desc_3', models.TextField(blank=True, verbose_name='Certificat 3 - Description')),
                ('license_recto_url', models.URLField(blank=True, max_length=500, null=True, verbose_name='URL licence recto')),
                ('license_verso_url', models.URLField(blank=True, max_length=500, null=True, verbose_name='URL licence verso')),
                ('available_casablanca', models.BooleanField(default=True, verbose_name='Disponible √† Casablanca')),
                ('available_rabat', models.BooleanField(default=True, verbose_name='Disponible √† Rabat')),
                ('available_tanger', models.BooleanField(default=False, verbose_name='Disponible √† Tanger')),
                ('available_marrakech', models.BooleanField(default=False, verbose_name='Disponible √† Marrakech')),
                ('available_agadir', models.BooleanField(default=False, verbose_name='Disponible √† Agadir')),
                ('available_fes', models.BooleanField(default=False, verbose_name='Disponible √† F√®s')),
                ('available_meknes', models.BooleanField(default=False, verbose_name='Disponible √† Mekn√®s')),
                ('available_oujda', models.BooleanField(default=False, verbose_name='Disponible √† Oujda')),
                ('available_laayoune', models.BooleanField(default=False, verbose_name='Disponible √† La√¢youne')),
                ('available_dakhla', models.BooleanField(default=False, verbose_name='Disponible √† Dakhla')),
                ('available_other', models.BooleanField(default=False, verbose_name='Disponible autre ville')),
                ('stat_employment_rate', models.CharField(blank=True, default='95%', max_length=50, verbose_name="Taux d'emploi apr√®s formation")),
                ('stat_student_satisfaction', models.CharField(blank=True, default='4.8/5', max_length=50, verbose_name='Satisfaction des stagiaires')),
                ('stat_exam_success', models.CharField(blank=True, default='98%', max_length=50, verbose_name='Taux de r√©ussite aux examens')),
                ('stat_average_salary', models.CharField(blank=True, default='8500 MAD', max_length=50, verbose_name='Salaire moyen apr√®s formation')),
                ('stat_company_partnerships', models.CharField(blank=True, default='50+', max_length=50, verbose_name='Entreprises partenaires')),
                ('feature_1', models.CharField(blank=True, max_length=200, verbose_name='Fonctionnalit√© 1')),
                ('feature_2', models.CharField(blank=True, max_length=200, verbose_name='Fonctionnalit√© 2')),
                ('feature_3', models.CharField(blank=True, max_length=200, verbose_name='Fonctionnalit√© 3')),
                ('feature_4', models.CharField(blank=True, max_length=200, verbose_name='Fonctionnalit√© 4')),
                ('feature_5', models.CharField(blank=True, max_length=200, verbose_name='Fonctionnalit√© 5')),
                ('faq_question_1', models.CharField(blank=True, max_length=300, verbose_name='FAQ Question 1')),
                ('faq_answer_1', models.TextField(blank=True, verbose_name='FAQ R√©ponse 1')),
                ('faq_question_2', models.CharField(blank=True, max_length=300, verbose_name='FAQ Question 2')),
                ('faq_answer_2', models.TextField(blank=True, verbose_name='FAQ R√©ponse 2')),
                ('faq_question_3', models.CharField(blank=True, max_length=300, verbose_name='FAQ Question 3')),
                ('faq_answer_3', models.TextField(blank=True, verbose_name='FAQ R√©ponse 3')),
                ('faq_question_4', models.CharField(blank=True, max_length=300, verbose_name='FAQ Question 4')),
                ('faq_answer_4', models.TextField(blank=True, verbose_name='FAQ R√©ponse 4')),
                ('faq_question_5', models.CharField(blank=True, max_length=300, verbose_name='FAQ Question 5')),
                ('faq_answer_5', models.TextField(blank=True, verbose_name='FAQ R√©ponse 5')),
                ('testimonial_name_1', models.CharField(blank=True, max_length=100, verbose_name='T√©moin 1 - Nom')),
                ('testimonial_review_1', models.TextField(blank=True, verbose_name='T√©moin 1 - T√©moignage')),
                ('testimonial_rating_1', models.PositiveIntegerField(default=5, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)], verbose_name='T√©moin 1 - Note (1-5)')),
                ('testimonial_position_1', models.CharField(blank=True, max_length=100, verbose_name='T√©moin 1 - Poste')),
                ('testimonial_name_2', models.CharField(blank=True, max_length=100, verbose_name='T√©moin 2 - Nom')),
                ('testimonial_review_2', models.TextField(blank=True, verbose_name='T√©moin 2 - T√©moignage')),
                ('testimonial_rating_2', models.PositiveIntegerField(default=5, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)], verbose_name='T√©moin 2 - Note (1-5)')),
                ('testimonial_position_2', models.CharField(blank=True, max_length=100, verbose_name='T√©moin 2 - Poste')),
                ('testimonial_name_3', models.CharField(blank=True, max_length=100, verbose_name='T√©moin 3 - Nom')),
                ('testimonial_review_3', models.TextField(blank=True, verbose_name='T√©moin 3 - T√©moignage')),
                ('testimonial_rating_3', models.PositiveIntegerField(default=5, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)], verbose_name='T√©moin 3 - Note (1-5)')),
                ('testimonial_position_3', models.CharField(blank=True, max_length=100, verbose_name='T√©moin 3 - Poste')),
                ('category_caces', models.BooleanField(db_index=True, default=False, verbose_name='Cat√©gorie CACES Engins')),
                ('category_electricite', models.BooleanField(db_index=True, default=False, verbose_name='Cat√©gorie √âlectricit√©')),
                ('category_soudage', models.BooleanField(db_index=True, default=False, verbose_name='Cat√©gorie Soudage')),
                ('category_securite', models.BooleanField(db_index=True, default=False, verbose_name='Cat√©gorie S√©curit√©')),
                ('category_management', models.BooleanField(db_index=True, default=False, verbose_name='Cat√©gorie Management')),
                ('category_autre', models.BooleanField(db_index=True, default=False, verbose_name='Cat√©gorie Autre')),
                ('next_session', models.DateField(blank=True, null=True, verbose_name='Prochaine session')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Date de cr√©ation')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Derni√®re modification')),
                ('view_count', models.PositiveIntegerField(default=0, verbose_name='Nombre de vues')),
                ('inquiry_count', models.PositiveIntegerField(default=0, verbose_name='Nombre de demandes')),
                ('enrollment_count', models.PositiveIntegerField(default=0, verbose_name="Nombre d'inscriptions")),
            ],
            options={
                'verbose_name': 'Formation',
                'verbose_name_plural': 'Formations',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['is_active', 'created_at'], name='diray_train_is_acti_45316b_idx'), models.Index(fields=['is_featured', 'is_active'], name='diray_train_is_feat_0dbcb1_idx'), models.Index(fields=['category_caces', 'is_active'], name='diray_train_categor_99ad54_idx'), models.Index(fields=['category_electricite', 'is_active'], name='diray_train_categor_eaa17f_idx'), models.Index(fields=['category_soudage', 'is_active'], name='diray_train_categor_1a98d5_idx'), models.Index(fields=['price_mad', 'is_active'], name='diray_train_price_m_d90cf8_idx')],
            },
        ),
        migrations.CreateModel(
            name='ContactRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('full_name', models.CharField(max_length=200, verbose_name='Nom complet')),
                ('email', models.EmailField(max_length=254, verbose_name='Adresse email')),
                ('phone', models.CharField(max_length=20, verbose_name='T√©l√©phone')),
                ('city', models.CharField(max_length=100, verbose_name='Ville')),
                ('country', models.CharField(default='Maroc', max_length=100, verbose_name='Pays')),
                ('request_type', models.CharField(choices=[('training', 'Demande de formation'), ('migration', 'Service de migration'), ('information', "Demande d'information"), ('partnership', 'Partenariat'), ('other', 'Autre')], max_length=20, verbose_name='Type de demande')),
                ('message', models.TextField(verbose_name='Message')),
                ('training_title', models.CharField(blank=True, max_length=200, verbose_name='Formation concern√©e')),
                ('current_country', models.CharField(blank=True, max_length=100, verbose_name='Pays actuel')),
                ('target_country', models.CharField(blank=True, max_length=100, verbose_name='Pays cible')),
                ('profession', models.CharField(blank=True, max_length=100, verbose_name='Profession')),
                ('status', models.CharField(choices=[('new', 'Nouveau'), ('contacted', 'Contact√©'), ('completed', 'Trait√©'), ('archived', 'Archiv√©')], default='new', max_length=20, verbose_name='Statut')),
                ('lead_score', models.PositiveIntegerField(default=0, verbose_name='Score du lead (0-100)')),
                ('is_threat', models.BooleanField(default=False, verbose_name='Menace potentielle')),
                ('threat_reason', models.CharField(blank=True, max_length=200, verbose_name='Raison de la menace')),
                ('pages_visited', models.PositiveIntegerField(default=0, verbose_name='Pages visit√©es')),
                ('time_on_site', models.IntegerField(default=0, verbose_name='Temps sur site (secondes)')),
                ('viewed_pricing', models.BooleanField(default=False, verbose_name='A consult√© les prix')),
                ('submitted_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Date de soumission')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='Adresse IP')),
                ('user_agent', models.TextField(blank=True, verbose_name='User Agent')),
                ('session_id', models.CharField(blank=True, max_length=100, verbose_name='ID de session')),
                ('training', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='diray.training', verbose_name='Formation')),
            ],
            options={
                'verbose_name': 'Demande de contact',
                'verbose_name_plural': 'Demandes de contact',
                'ordering': ['-submitted_at'],
            },
        ),
        migrations.CreateModel(
            name='TrainingReview',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('full_name', models.CharField(max_length=100, verbose_name='Nom complet')),
                ('email', models.EmailField(max_length=254, verbose_name='Email')),
                ('rating', models.PositiveIntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)], verbose_name='Note (1-5)')),
                ('title', models.CharField(max_length=200, verbose_name='Titre du commentaire')),
                ('comment', models.TextField(verbose_name='Commentaire')),
                ('is_verified', models.BooleanField(default=False, verbose_name='V√©rifi√©')),
                ('is_approved', models.BooleanField(default=False, verbose_name='Approuv√© pour affichage')),
                ('helpful_count', models.PositiveIntegerField(default=0, verbose_name='Utile')),
                ('not_helpful_count', models.PositiveIntegerField(default=0, verbose_name='Pas utile')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Date de cr√©ation')),
                ('contact_request', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='diray.contactrequest', verbose_name='Demande originale')),
                ('training', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reviews', to='diray.training', verbose_name='Formation')),
            ],
            options={
                'verbose_name': 'Avis sur formation',
                'verbose_name_plural': 'Avis sur formations',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='TrainingWaitlist',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('email', models.EmailField(max_length=254, verbose_name='Adresse email')),
                ('full_name', models.CharField(max_length=200, verbose_name='Nom complet')),
                ('phone', models.CharField(blank=True, max_length=20, verbose_name='T√©l√©phone')),
                ('preferred_session', models.DateField(blank=True, null=True, verbose_name='Session pr√©f√©r√©e')),
                ('city', models.CharField(max_length=100, verbose_name='Ville')),
                ('notified', models.BooleanField(default=False, verbose_name='Notifi√©')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name="Date d'inscription")),
                ('training', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='waitlist', to='diray.training', verbose_name='Formation')),
            ],
            options={
                'verbose_name': "Liste d'attente",
                'verbose_name_plural': "Listes d'attente",
                'ordering': ['created_at'],
            },
        ),
        migrations.AddIndex(
            model_name='contactrequest',
            index=models.Index(fields=['status', 'submitted_at'], name='diray_conta_status_2b2221_idx'),
        ),
        migrations.AddIndex(
            model_name='contactrequest',
            index=models.Index(fields=['lead_score'], name='diray_conta_lead_sc_7b99cb_idx'),
        ),
        migrations.AddIndex(
            model_name='contactrequest',
            index=models.Index(fields=['is_threat', 'submitted_at'], name='diray_conta_is_thre_78c088_idx'),
        ),
        migrations.AddIndex(
            model_name='contactrequest',
            index=models.Index(fields=['ip_address', 'submitted_at'], name='diray_conta_ip_addr_b7a270_idx'),
        ),
        migrations.AddIndex(
            model_name='trainingreview',
            index=models.Index(fields=['training', 'is_approved', 'is_verified'], name='diray_train_trainin_d8b6bd_idx'),
        ),
        migrations.AddIndex(
            model_name='trainingreview',
            index=models.Index(fields=['rating', 'is_approved'], name='diray_train_rating_2a2c8a_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='trainingwaitlist',
            unique_together={('training', 'email')},
        ),
    ]
